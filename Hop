repeat wait() until game:IsLoaded()
local games = game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public") -- send request to API
local json = game:GetService("HttpService"):JSONDecode(games)
local maxplayerCount = 5

function PlayerDetect()
   local Players = game.Players:GetPlayers()
   if #Players  > maxplayerCount then
       for i = 1,#json.data do
           if json.data[i].id ~= game.JobId then
               if json.data[i].maxPlayers ~= json.data[i].playing then
                   if json.data[i].playing < 3 or json.data[i].playing < maxplayerCount then
                   print(#Players)
                   game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, json.data[math.random(1, #json.data)].id)
                   end
               end
           end
       end
   end
end


PlayerDetect()


game.Players.PlayerAdded:Connect(function()
   PlayerDetect()
end)


game.Players.PlayerRemoving:Connect(function()
   PlayerDetect()
end)
